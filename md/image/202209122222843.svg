<svg xmlns="http://www.w3.org/2000/svg" class="w-screen h-screen leading-none markmap mm-oiam12-1" style=""><style>.markmap{font:300 16px/20px sans-serif}.markmap-link{fill:none}.markmap-node&gt;circle{cursor:pointer}.markmap-foreign{display:inline-block}.markmap-foreign a{color:#0097e6}.markmap-foreign a:hover{color:#00a8ff}.markmap-foreign code{background-color:#f0f0f0;border-radius:2px;color:#555;font-size:calc(1em - 2px)}.markmap-foreign :not(pre)&gt;code{padding:.2em .4em}.markmap-foreign del{text-decoration:line-through}.markmap-foreign em{font-style:italic}.markmap-foreign strong{font-weight:bolder}.markmap-foreign mark{background:#ffeaa7}.markmap-foreign pre,.markmap-foreign pre[class*=language-]{margin:0;padding:.2em .4em}</style><g transform="translate(-38.83302473228346,512.2498700682576) scale(0.5588291178784848)"><path class="markmap-link" data-depth="1" data-path="1.2" d="M209,10C249,10,249,-572,289,-572" stroke="rgb(255, 127, 14)" stroke-width="2"></path><path class="markmap-link" data-depth="1" data-path="1.3" d="M209,10C249,10,249,-547,289,-547" stroke="rgb(148, 103, 189)" stroke-width="2"></path><path class="markmap-link" data-depth="1" data-path="1.5" d="M209,10C249,10,249,-405,289,-405" stroke="rgb(44, 160, 44)" stroke-width="2"></path><path class="markmap-link" data-depth="1" data-path="1.9" d="M209,10C249,10,249,86,289,86" stroke="rgb(23, 190, 207)" stroke-width="2"></path><path class="markmap-link" data-depth="1" data-path="1.12" d="M209,10C249,10,249,592,289,592" stroke="rgb(44, 160, 44)" stroke-width="2"></path><path class="markmap-link" data-depth="2" data-path="1.3.4" d="M338,-547C378,-547,378,-460,418,-460" stroke="rgb(140, 86, 75)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.5.6" d="M338,-405C378,-405,378,-430,418,-430" stroke="rgb(227, 119, 194)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.5.7" d="M338,-405C378,-405,378,-405,418,-405" stroke="rgb(127, 127, 127)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.5.8" d="M338,-405C378,-405,378,-380,418,-380" stroke="rgb(188, 189, 34)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.9.10" d="M370,86C410,86,410,157,450,157" stroke="rgb(31, 119, 180)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.9.11" d="M370,86C410,86,410,522,450,522" stroke="rgb(255, 127, 14)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.12.13" d="M338,592C378,592,378,562.5,418,562.5" stroke="rgb(214, 39, 40)" stroke-width="1.5"></path><path class="markmap-link" data-depth="2" data-path="1.12.16" d="M338,592C378,592,378,617.5,418,617.5" stroke="rgb(227, 119, 194)" stroke-width="1.5"></path><path class="markmap-link" data-depth="3" data-path="1.12.13.14" d="M435,562.5C475,562.5,475,552,515,552" stroke="rgb(148, 103, 189)" stroke-width="1.5"></path><path class="markmap-link" data-depth="3" data-path="1.12.13.15" d="M435,562.5C475,562.5,475,577,515,577" stroke="rgb(140, 86, 75)" stroke-width="1.5"></path><path class="markmap-link" data-depth="3" data-path="1.12.16.17" d="M435,617.5C475,617.5,475,607,515,607" stroke="rgb(127, 127, 127)" stroke-width="1.5"></path><path class="markmap-link" data-depth="3" data-path="1.12.16.18" d="M435,617.5C475,617.5,475,632,515,632" stroke="rgb(188, 189, 34)" stroke-width="1.5"></path><g data-depth="3" data-path="1.12.16.18" transform="translate(515, 612)" class="markmap-node"><line x1="-1" x2="499" y1="20" y2="20" stroke="rgb(188, 189, 34)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="481" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">客户端必须理解所有策略算法的区别，以便适时选择恰当的算法类。</div></foreignObject></g><g data-depth="3" data-path="1.12.16.17" transform="translate(515, 587)" class="markmap-node"><line x1="-1" x2="243" y1="20" y2="20" stroke="rgb(127, 127, 127)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="225" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">策略类会增多，增加维护难度。</div></foreignObject></g><g data-depth="3" data-path="1.12.13.15" transform="translate(515, 557)" class="markmap-node"><line x1="-1" x2="707" y1="20" y2="20" stroke="rgb(140, 86, 75)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="689" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">把算法的使用放到环境类中，而算法的实现移到具体策略类中，实现解耦，实现算法的自由切换。</div></foreignObject></g><g data-depth="3" data-path="1.12.13.14" transform="translate(515, 532)" class="markmap-node"><line x1="-1" x2="595" y1="20" y2="20" stroke="rgb(148, 103, 189)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="577" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">提供了对开闭原则的完美支持，可以在不修改原代码的情况下，灵活增加新算法。</div></foreignObject></g><g data-depth="2" data-path="1.12.16" transform="translate(418, 601.5)" class="markmap-node"><line x1="-1" x2="19" y1="16" y2="16" stroke="rgb(227, 119, 194)" stroke-width="1.5"></line><circle stroke-width="1.5" cx="17" cy="16" r="6" stroke="rgb(227, 119, 194)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="1" height="16" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml"></div></foreignObject></g><g data-depth="2" data-path="1.12.13" transform="translate(418, 546.5)" class="markmap-node"><line x1="-1" x2="19" y1="16" y2="16" stroke="rgb(214, 39, 40)" stroke-width="1.5"></line><circle stroke-width="1.5" cx="17" cy="16" r="6" stroke="rgb(214, 39, 40)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="1" height="16" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml"></div></foreignObject></g><g data-depth="2" data-path="1.9.11" transform="translate(450, 162)" class="markmap-node"><line x1="-1" x2="802" y1="360" y2="360" stroke="rgb(255, 127, 14)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="784" height="360" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml"><pre><code>@Autowired
BudgetServiceContext budgetServiceContext;

@Test
public void handleMessage() {
        // 构建一个费用预算
        BudgetInfo budgetInfo = new BudgetInfo(BUDGET_TYPE.COST.code, "费用类型");
        IBudgetService service = (IBudgetService) SpringUtil.getBean("costBudgetServiceImpl");
        service.handleBudget(budgetInfo);
        // 添加一个默认领取

        IBudgetService budgetService = budgetServiceContext.getMessageService(budgetInfo.getType());
        // 处理费用类型 费用内容
        // 可以看到预算类型被费用处理类所处理
        budgetService.handleBudget(budgetInfo);
}    

</code></pre>
</div></foreignObject></g><g data-depth="2" data-path="1.9.10" transform="translate(450, -370)" class="markmap-node"><line x1="-1" x2="304" y1="527" y2="527" stroke="rgb(31, 119, 180)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="286" height="527" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml"><pre><code>@Data
@AllArgsConstructor
public class BudgetInfo {

   /**预算大类  费用/资产/代采购/外包
     */
    private Integer type;

    /**预算内容
     */
    private String content;

    /**部门编号
     */
    private String deptcode;

    /**部门名称
     */
    private String deptname;

    /**科目/名称/客户
     */
    private String name;

}
</code></pre>
</div></foreignObject></g><g data-depth="2" data-path="1.5.8" transform="translate(418, -400)" class="markmap-node"><line x1="-1" x2="1394" y1="20" y2="20" stroke="rgb(188, 189, 34)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="1376" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">Context（上下文/环境）：负责使用Strategy角色。Context角色保存了ConcreteStrategy角色的实例，并使用ConcreteStrategy角色去实现需求（总之，还是要调用Strategy角色的接口（API））。</div></foreignObject></g><g data-depth="2" data-path="1.5.7" transform="translate(418, -425)" class="markmap-node"><line x1="-1" x2="932" y1="20" y2="20" stroke="rgb(127, 127, 127)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="914" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">ConcreteStrategy（具体的策略）：负责实现Strategy角色的接口（API），即负责实现具体的策略（战略、方向、方法和算法）。</div></foreignObject></g><g data-depth="2" data-path="1.5.6" transform="translate(418, -450)" class="markmap-node"><line x1="-1" x2="819" y1="20" y2="20" stroke="rgb(227, 119, 194)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="801" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">Strategy（策略）：负责决定实现策略所必需的接口（API）。在示例程序中，由IBudgetService接口扮演此角色。</div></foreignObject></g><g data-depth="2" data-path="1.3.4" transform="translate(418, -654)" class="markmap-node"><line x1="-1" x2="315" y1="194" y2="194" stroke="rgb(140, 86, 75)" stroke-width="1.5"></line><foreignObject class="markmap-foreign" x="8" y="0" width="297" height="194" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml"><pre><code> if (BUDGET_TYPE = "费用") {
        // dosomething
    } else if(BUDGET_TYPE = "资产") {
        // doshomething
    } else if(BUDGET_TYPE = "外包") {
        // doshomething
    } else {
        // doshomething
    }
</code></pre>
</div></foreignObject></g><g data-depth="1" data-path="1.12" transform="translate(289, 572)" class="markmap-node"><line x1="-1" x2="51" y1="20" y2="20" stroke="rgb(44, 160, 44)" stroke-width="2"></line><circle stroke-width="1.5" cx="49" cy="20" r="6" stroke="rgb(44, 160, 44)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="33" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">总结</div></foreignObject></g><g data-depth="1" data-path="1.9" transform="translate(289, 66)" class="markmap-node"><line x1="-1" x2="83" y1="20" y2="20" stroke="rgb(23, 190, 207)" stroke-width="2"></line><circle stroke-width="1.5" cx="81" cy="20" r="6" stroke="rgb(23, 190, 207)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="65" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">实现过程</div></foreignObject></g><g data-depth="1" data-path="1.5" transform="translate(289, -425)" class="markmap-node"><line x1="-1" x2="51" y1="20" y2="20" stroke="rgb(44, 160, 44)" stroke-width="2"></line><circle stroke-width="1.5" cx="49" cy="20" r="6" stroke="rgb(44, 160, 44)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="33" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">介绍</div></foreignObject></g><g data-depth="1" data-path="1.3" transform="translate(289, -567)" class="markmap-node"><line x1="-1" x2="51" y1="20" y2="20" stroke="rgb(148, 103, 189)" stroke-width="2"></line><circle stroke-width="1.5" cx="49" cy="20" r="6" stroke="rgb(148, 103, 189)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="33" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">背景</div></foreignObject></g><g data-depth="1" data-path="1.2" transform="translate(289, -592)" class="markmap-node"><line x1="-1" x2="51" y1="20" y2="20" stroke="rgb(255, 127, 14)" stroke-width="2"></line><foreignObject class="markmap-foreign" x="8" y="0" width="33" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">大纲</div></foreignObject></g><g data-depth="0" data-path="1" transform="translate(80,-10)" class="markmap-node"><line x1="-1" x2="131" y1="20" y2="20" stroke="rgb(31, 119, 180)" stroke-width="4"></line><circle stroke-width="1.5" cx="129" cy="20" r="6" stroke="rgb(31, 119, 180)" fill="rgb(255, 255, 255)"></circle><foreignObject class="markmap-foreign" x="8" y="0" width="113" height="20" style="opacity: 1;"><div xmlns="http://www.w3.org/1999/xhtml">策略模式及应用</div></foreignObject></g></g></svg>